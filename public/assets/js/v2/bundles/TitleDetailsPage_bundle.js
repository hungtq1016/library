!function(e){var i={};function r(a){if(i[a])return i[a].exports;var t=i[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=i,r.d=function(e,i,a){r.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(i,"a",i),i},r.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},r.p="",r.w={},r(r.s=2)}([function(e,i){var r=r||{};r.LibrarySearch=function(e,i,a,t,n,o,l,s,d){e=e;var c=$("#librariesTableByPosition"),v=(t=t,function(e){$(c).empty(),$(c).removeClass("empty");var r=window.OverDrive.SiteCopy.get("findInLibrariesPage.loading");$(c).append('<tr class="table-loading"><td>'+r+"</td></tr>"),$.ajax({url:t+e,success:function(e){e.aaData.length>0?u(e):w(b(),l)},timeout:1e4,error:function(e){"timeout"===e.statusText?alert(i):alert(a),w()}}),l&&g()}),u=function(i){$(c).empty();var r=0;$.each(i.aaData,function(i,a){var t="";a.distance>0&&(t='<span class="icon icon-map-pin"></span> <span>'+window.OverDrive.SiteCopy.get("findInLibrariesPage.libraryDistance",{distance:a.distance})+"</span>");var n="";if(a.isIdcEnabled){let e;n='<a href="'+(e=window.OverDrive.featureManager.isEnabled("use-zelda-links")?a.libraryUrl:"http://"+a.libraryUrl+"/account/ozone/sign-in?forward=%2F&showIdcSignUp=true")+'" aria-label="'+window.OverDrive.SiteCopy.get("ariaLabels.getInstantCard",{libraryName:a.consortium})+'" target="_blank" class="cardLink"><img src="/Content/img/icons/svg/holding-phone-icon.svg" alt=""/> '+window.OverDrive.SiteCopy.get("findInLibrariesPage.getInstantCard")+"</a>"}else""!=a.branchCardAcquisitionUrl&&null!=a.branchCardAcquisitionUrl&&(n='<a href="'+a.branchCardAcquisitionUrl+'" target="_blank" aria-label="'+window.OverDrive.SiteCopy.get("ariaLabels.getLibraryCard",{libraryName:a.consortium})+'" class="cardLink needACard">'+window.OverDrive.SiteCopy.get("findInLibrariesPage.needLibraryCard")+"</a>");var o=a.isPublic?"isPublic":"isSchool",l=a.isPublic?window.OverDrive.SiteCopy.get("detailsPage.savedLibraries.viewLibrarySite"):window.OverDrive.SiteCopy.get("detailsPage.savedLibraries.viewSchoolSite"),s="";let v;r+1>window.OverDrive.minNumOfLibraries&&(s="hiddenLibrary"),v=window.OverDrive.featureManager.isEnabled("use-zelda-links")?`${a.libraryUrl}&titleId=${d}`:`https://${a.libraryUrl}/ContentDetails.htm?id=${e}`;var u="";u+='<tr tabindex="0" class="'+s+" "+o+'">',u+='<td class="adjustLibraryColWidth">',u+='<div class="mobileView">',u+="<h6>"+window.OverDrive.SiteCopy.get("findInLibrariesPage.libraryNameLabel")+": </h6>",u+='<a class="libraryLink" aria-label="'+window.OverDrive.SiteCopy.get("ariaLabels.libraryLink",{libraryName:a.consortium,title:window.OverDrive.titleName})+'" href="http://'+a.libraryUrl+"/ContentDetails.htm?id="+e+'" data-name="'+a.name+'" data-id="'+a.id+'">'+a.name+" ("+a.consortium+")</a>",u+="<h6>"+window.OverDrive.SiteCopy.get("findInLibrariesPage.distanceLabel")+": </h6>",u+='<div class="mobileDistance">'+t+"</div>",u+="</div>",u+='<div class="largerView">',u+='<a class="libraryLink" href="'+v+'" aria-label="'+window.OverDrive.SiteCopy.get("ariaLabels.libraryLink",{libraryName:a.consortium,title:window.OverDrive.titleName})+'" data-name="'+a.name+'" data-id="'+a.id+'">'+a.name+" ("+a.consortium+")</a>",u+="</div>",u+="</td>",u+='<td class="distanceCol">'+t+"</td>",u+='<td class="gacLinkCol">'+n+"</td>",u+='<td class="viewButtonCol"><a tabindex="0" aria-label="'+window.OverDrive.SiteCopy.get("ariaLabels.libraryLink",{libraryName:a.consortium,title:window.OverDrive.titleName})+'" class="btn btn--small" href="'+v+'" data-name="'+a.name+'" data-id="'+a.id+'" target="blank">'+l+"</a></td>",u+="</tr>",$(c).append(u),r+=1});var a=i.aaData.length;a>window.OverDrive.minNumOfLibraries?($(".seeMore").show(),m(window.OverDrive.minNumOfLibraries,a),$(".seeMore").on("click",function(){$("tr").removeClass("hiddenLibrary"),$(".seeMore").hide(),m(a,a)})):($(".seeMore").hide(),m(a,a))},w=function(e,i){$(c).empty(),$(c).addClass("empty"),$(c).append("<tr><td>"+e+"</td></tr>"),i&&$(".seeMoreLibraries a").text(window.OverDrive.SiteCopy.get("findInLibrariesPage.findInOtherLibraries")),$(".bottomLink").hide(),$(".tableHeader").hide()},b=function(){var e="<h6>"+window.OverDrive.SiteCopy.get("findInLibrariesPage.noLibrariesFound")+"</h6>";return e+="<p>"+window.OverDrive.SiteCopy.get("findInLibrariesPage.pleaseTryAgain")+"</p>",e+="<ul>",e+="<li>"+window.OverDrive.SiteCopy.get("findInLibrariesPage.doesNotHaveTitle")+"</li>",e+="<li>"+window.OverDrive.SiteCopy.get("findInLibrariesPage.doesNotOfferTitle")+"</li>",e+="<ul>"},g=function(){$(".dataTables_info").hide(),$(".seeMoreLibraries").show()},f=function(e){var i=n;w(i+=".",!1)},h=function(e){var i=e.coords.latitude+","+e.coords.longitude;if(positionTable=v("&position="+i),$("#positionResult").css({display:"block"}),$(".library-search-bar__locator").addClass("filled"),1==window.OverDrive.useIpLocation&&$(".seeMoreLibraries a").length>0){var r=$(".seeMoreLibraries a").attr("href");""!=r&&(r+=`&lat=${e.coords.latitude}&lon=${e.coords.longitude}`,$(".seeMoreLibraries a").attr("href",r))}},p=function(){positionTable=v("&position="+window.OverDrive.location),$("#positionResult").css({display:"block"})},m=function(e,i){var r="none"===$(".seeMore").css("display"),a=window.OverDrive.SiteCopy.get("findInLibrariesPage.showingTitles",{num:e,total:i}),t=r?"":" : ";$(".showingEntriesText").text(a+t)};return{initialize:function(){window.OverDrive.location&&""!==window.OverDrive.location?p():navigator.geolocation.getCurrentPosition(h,function(){f()}),$("body").on("click","table.dataTable a",function(){var e=$(this),i=e.data("name"),a=e.data("id");r.GA.record.library.visited(i,a)}),1==window.OverDrive.useIpLocation&&$(".icon-location").on("click",function(){navigator.geolocation.getCurrentPosition(h,function(){""!==window.OverDrive.location?p():f()})}),$(".library-search-bar__form").submit(function(e){e.preventDefault(),function(){var e=$("#inlineLibraryFilter").val();searchTable=v("&q="+e),$("#positionResult").css({display:"none"})}()})},filterForOnlySchools:function(){$(".hiddenLibrary").show(),$(".isPublic").hide(),$(".seeMore").hide();var e=$("tr").length-$(".isPublic").length;m(e,e)},filterForOnlyPublicLibraries:function(){$(".hiddenLibrary").show(),$(".isSchool").hide(),$(".seeMore").hide();var e=$(".isPublic").length;m(e,e)},undoFiltering:function(){$(".isSchool").show(),$(".isPublic").show(),$(".seeMore").hide();var e=$("tr").length;m(e,e)}}},e.exports=r.LibrarySearch},,function(e,i,r){var a=r(0);function t(){var e=$(".title-page__cover").height()-$(".title-hero").height();e>0&&$(".title-page__wrapper").css("padding-top","calc(".concat(e,"px + 3em)"))}$(function(){var e=!1;$(".read-more-button").on("click",function(i){e?($(".title-page__blurb").addClass("short"),$(i.currentTarget).text(window.OverDrive.SiteCopy.get("detailsPage.readMore")),e=!1):($(".title-page__blurb").removeClass("short"),$(i.currentTarget).text(window.OverDrive.SiteCopy.get("detailsPage.readLess")),e=!0)})}),$(document).ready(function(){((function(){var e=$("#sample-target img").attr("src"),i="background-image: url(".concat(e,");                             background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 101, 149, 0.95)), to(rgba(6,35, 64, 0.95))), url(").concat(e,");                             background-image: -webkit-linear-gradient(top, rgba(0, 101, 149, 0.95) 0%, rgba(6,35, 64, 0.95) 100%), url(").concat(e,");                             background-image: -moz-linear-gradient(top, rgba(0, 101, 149, 0.95) 0%, rgba(6,35, 64, 0.95) 100%), url(").concat(e,");                             background-image: -o-linear-gradient(top, rgba(0, 101, 149, 0.95) 0%, rgba(6,35, 64, 0.95) 100%), url(").concat(e,");                             background-image: linear-gradient(to bottom, rgba(0, 101, 149, 0.95) 0%, rgba(6,35, 64, 0.95) 100%), url(").concat(e,");");$(".title-hero").attr("style",i)})(),window.OverDrive.isLoggedIn&&window.OverDrive.savedLibrariesUrl)?$.ajax({url:window.OverDrive.savedLibrariesUrl,cache:!1,success:function(e){$("#acquire-bar").html(e)}}):new a(window.OverDrive.reserveID,window.OverDrive.timeoutText,window.OverDrive.enericErrorText,window.OverDrive.librarySearchUrl,window.OverDrive.geocodeFailureText,window.OverDrive.getPositionUrl,!0,window.OverDrive.librariesUrl,window.OverDrive.titleId).initialize();if(window.OverDrive.relatedTitlesUrl&&$("#relatedTitles").load(window.OverDrive.relatedTitlesUrl,function(){$(window).trigger("resize"),$(".result img").unveil(650,function(){$(this).load(function(){$(this).css({width:"100%",marginTop:"0"})})})}),window.OverDrive.relatedFormatTitleUrl&&$(".related-format-title").load(window.OverDrive.relatedFormatTitleUrl),window.OverDrive.seriesSlug){var e=function(){$("#title-page__series").load(r,function(){$(window).trigger("resize"),$("#series-language").change(function(e){i(e.target.value)})})},i=function(i){r=(r=window.OverDrive.seriesUrlBlankTitle).replace("TITLEID",i),$("#title-page__series").empty(),e()},r=window.OverDrive.getSeriesUrl;e()}if(window.OverDrive.isAudiobook){var n=function(e){var i=$(".cover").outerWidth();$(".cover").css("height",i*e)};(function(e){var i,r,a;e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),i=e[1],r=e[2],a=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),i=e>>16,r=e>>8&255,a=255&e);if(Math.sqrt(i*i*.299+r*r*.587+a*a*.114)>200)return!0;return!1})(window.OverDrive.coverColor)&&$(".icon-headphone svg").css("stroke","black");var o=1;o=0!=window.OverDrive.coverHeight&&0!=window.OverDrive.coverWidth?window.OverDrive.coverHeight/window.OverDrive.coverWidth:$(".cover img").outerHeight()/$(".cover img").outerWidth(),n(o),$(window).resize(function(){n(o)})}t(),$(window).resize(function(){t()})})}]);
//# sourceMappingURL=TitleDetailsPage_bundle.js.map